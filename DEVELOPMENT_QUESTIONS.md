# Fortune Compass 開発前の確認事項

> 開発をスムーズに進めるために、以下の点を確認させてください。

---

## 🔮 占い計算ロジックについて

### Q1: 占い計算の実装方針 ✅ **決定済み**

**回答**: **A. 本物の計算ロジックを実装**

- 四柱推命：日干・五行バランス・十干十二支の計算
- 紫微斗数：命盤の星配置・宮位の計算
- 数秘術：ライフパスナンバーの計算

**実装方針**: P0-3で本実装を行います（見積もり：8-12時間）

---

### Q2: タロットカードの画像・メッセージ管理 ✅ **決定済み**

**回答**: **78枚のタロットカード画像を所有済み**

**実装方針**:
- 画像は `storage/app/public/tarot/` に保存
- メッセージは設定ファイル（`config/tarot.php`）またはデータベース（`tarot_cards`テーブル）に保存
- 78枚全てに対応（大アルカナ22枚 + 小アルカナ56枚）
- P0-4で実装

---

## 📅 生年月日・時間・場所について

### Q3: 出生時間の扱い ✅ **決定済み**

**回答**: **「不明」選択肢を設け、不明の場合は紫微斗数をグレーアウト**

**実装方針**:
- 出生時間入力に「不明」選択肢を追加
- 出生時間が「不明」の場合、紫微斗数の結果をグレーアウト表示
- 他の3占術（四柱推命・数秘術・タロット）は通常通り表示
- P0-1, P0-4, P0-7で実装

---

### Q4: 出生地の扱い ✅ **決定済み**

**回答**: **都道府県レベルでOK**

**実装方針**:
- 都道府県のドロップダウンまたはテキスト入力
- 例：「東京都」「大阪府」
- P0-1で実装

---

## 🎨 UI/UX・デザインについて

### Q5: タロットカードの画像

**質問**: タロットカードの画像は、どこから入手しますか？

**選択肢**:
- [ ] **A. 既に画像を所有している**
  - 画像ファイルを提供していただければ、プロジェクトに配置します

- [ ] **B. 無料のタロットカード画像を使用**
  - パブリックドメインの画像を使用
  - 例：Wikimedia Commonsなど

- [ ] **C. 後で追加する**
  - 最初はプレースホルダー画像で実装
  - 後で本物の画像に差し替え

**推奨**: C（プレースホルダーで始める）で進め、後で画像を追加

---

### Q6: フォント（Noto Sans JP）の実装

**質問**: Noto Sans JPフォントは、どのように実装しますか？

**選択肢**:
- [ ] **A. Google Fontsから読み込む**
  - `<link>`タグでGoogle Fontsから読み込み
  - メリット：簡単、無料
  - デメリット：外部依存、プライバシー懸念

- [ ] **B. ローカルにダウンロードして使用**
  - フォントファイルを`public/fonts/`に配置
  - メリット：外部依存なし、プライバシー対応
  - デメリット：ファイルサイズが大きい

**推奨**: A（Google Fonts）で始め、必要に応じてBに移行

---

## 💾 データ管理について

### Q7: ログイン前の鑑定結果の保存方法

**質問**: ログイン前に診断した結果は、どのように保存しますか？

**選択肢**:
- [ ] **A. セッションに保存**
  - Laravelのセッション機能を使用
  - メリット：簡単、データベース不要
  - デメリット：セッションが切れると消える

- [ ] **B. 一時テーブルに保存**
  - `temp_fortune_results` テーブルを作成
  - メリット：永続化可能
  - デメリット：データベース設計が複雑

- [ ] **C. クッキーに保存**
  - ブラウザのクッキーに保存
  - メリット：シンプル
  - デメリット：プライバシー懸念、サイズ制限

**推奨**: A（セッション）で始め、必要に応じてBに拡張

---

### Q8: 感情ログの保存期間

**質問**: 感情ログ（Mood Record）は、どのくらいの期間保存しますか？

**選択肢**:
- [ ] **A. 無期限に保存**
  - ユーザーが削除するまで保存
  - メリット：長期的な振り返りが可能

- [ ] **B. 一定期間のみ保存（例：1年）**
  - 1年以上前のデータは自動削除
  - メリット：データベース容量を節約

- [ ] **C. ユーザーが選択可能**
  - 設定画面で保存期間を選択
  - メリット：柔軟性

**推奨**: A（無期限に保存）で始める

---

## 🔐 セキュリティ・プライバシーについて

### Q9: 個人情報の取り扱い

**質問**: 生年月日・出生時間・出生地などの個人情報は、どのように管理しますか？

**確認事項**:
- [ ] **プライバシーポリシー**: 作成が必要か？
- [ ] **データ暗号化**: 生年月日などの機密情報を暗号化するか？
- [ ] **データ削除**: ユーザーがアカウント削除時に、占い結果も削除するか？
- [ ] **AI学習への使用**: 仕様書では「AI学習には使わない」と明記されているが、確認

**推奨**: 
- プライバシーポリシーは作成推奨
- データ暗号化は本番環境で検討
- アカウント削除時は関連データも削除

---

## 🚀 デプロイ・運用について

### Q10: 本番環境の詳細

**質問**: AWS Lightsailの詳細設定は？

**確認事項**:
- [ ] **ドメイン**: 既に取得済みか？取得予定か？
- [ ] **SSL証明書**: Let's Encryptなどで自動取得するか？
- [ ] **メール送信**: パスワードリセットなどのメール送信は、どのサービスを使用？（SendGrid、SES、など）
- [ ] **バックアップ**: データベースのバックアップ方針は？

**推奨**: 
- ドメインは早めに取得
- SSL証明書は自動取得（Let's Encrypt）
- メール送信はSendGrid or SES
- バックアップは自動化（日次）

---

### Q11: 開発環境の確認

**質問**: ローカル開発環境は、どのようにセットアップしますか？

**確認事項**:
- [ ] **Laravel Sail**: Dockerを使用するか？
- [ ] **ローカルPHP**: ローカルのPHP環境を使用するか？
- [ ] **データベース**: ローカルでMySQLを使用するか？SQLiteでOKか？

**推奨**: 
- 開発はSQLiteでOK（簡単）
- 本番前はMySQLでテスト

---

## 📊 パフォーマンス・スケーラビリティについて

### Q12: 同時アクセス数の想定

**質問**: 想定される同時アクセス数は？

**確認事項**:
- [ ] **初期**: どのくらいのユーザー数を想定？
- [ ] **成長後**: 将来的にどのくらいまで想定？
- [ ] **キャッシュ戦略**: Redisを使用するか？

**推奨**: 
- 初期はRedisなしでOK
- 成長に応じてRedisを導入

---

## 🧪 テストについて

### Q13: テストの方針

**質問**: テストはどの程度書きますか？

**選択肢**:
- [ ] **A. 主要機能のみテスト**
  - 認証、占い計算、データ保存など
  - メリット：開発速度が速い

- [ ] **B. 包括的なテスト**
  - すべての機能をテスト
  - メリット：品質が高い
  - デメリット：開発時間がかかる

**推奨**: A（主要機能のみ）で始め、必要に応じて拡張

---

## 📝 その他

### Q14: 多言語対応

**質問**: 将来的に多言語対応（英語など）は必要ですか？

- [ ] **必要**: 最初から多言語対応を考慮
- [ ] **不要**: 日本語のみでOK

**推奨**: 不要（日本語のみ）で始める

---

### Q15: ログ・モニタリング

**質問**: エラーログやアクセスログの管理は？

**選択肢**:
- [ ] **A. Laravel標準のログ機能のみ**
  - `storage/logs/laravel.log`
  - メリット：簡単

- [ ] **B. 外部サービスを使用**
  - Sentry、LogRocket、など
  - メリット：高度な分析が可能
  - デメリット：コスト

**推奨**: A（Laravel標準）で始め、必要に応じてBに移行

---

---

## 🎯 ユーザージャーニーの変更 ✅ **決定済み**

### Q16: ログイン前の世界観表示

**回答**: **ログインせずとも、世界観を深く見せてからログイン誘導**

**実装方針**:
- トップページ（`/`）に以下を配置：
  - 占いの説明ページ（四柱推命・紫微斗数・数秘術・タロットの説明）
  - 個別鑑定の紹介（祖乃果のプロフィール・ストーリー・STORESリンク）
  - 物販の紹介（パワーストーン・PDFガイド・自己理解ブック・STORESリンク）
  - コラム・記事（祖乃果の世界観を深く伝える記事）
- 生年月日入力 → 簡易診断結果表示
- その後、「ログインして、もっと深く知る」CTAボタン
- P0-4で実装

### Q17: ログイン時点でのサブスク選択

**回答**: **ログイン時点で、無料登録 or サブスク登録を選択可能**

**実装方針**:
- ログイン画面で選択肢を提示：
  - 無料登録：メールアドレスのみでOK、コア機能が使える
  - サブスク登録：ログイン時点でサブスクも選択可能（選択肢として提示）
- 無料体験期間があれば提示
- P0-5で実装

---

## ✅ 確認後の次のステップ

**決定済みの事項**:
1. ✅ **占い計算ロジックの実装方針**（Q1）：本実装
2. ✅ **タロットカードの画像・メッセージ管理**（Q2）：78枚所有済み
3. ✅ **出生時間・出生地の扱い**（Q3, Q4）：不明選択肢、都道府県レベル
4. ✅ **ユーザージャーニー**（Q16, Q17）：世界観先行、ログイン時点でサブスク選択

**まだ確認が必要な事項**:
- **本番環境の詳細**（Q10）：ドメイン、メール送信サービスなど

これらが決まれば、すぐに開発を開始できます！

